#!/bin/bash

date_icon="${date_icon:-\uf133}"

date_init() {
	while :; do
		echo "date_request" > "$1"
		sleep 60
	done &
}

if [ "$1" == "--init" ]; then
	date_init "$2"
	exit 0
fi

read line
[ "$line" == "date_request" ] || exit 1

DATESTRING=$(date +"%A, %b %d")
echo -n -e "icon:${date_icon} text:\"${DATESTRING}\""
